Dashboard test_metrics_vud {
  title: 'Phuong - Test metrics & VUD'
  block title: TextBlock {
    content: @md Test metrics;;
  }
  block v_agne: VizBlock {
    label: 'Count'
    viz: DataTable {
      dataset: demo_ecommerce_version_2
      fields: [
        VizFieldFull {
          ref: r(ecommerce_countries.continent_name)
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: r(ecommerce_orders.id)
          aggregation: 'count'
          format {
            type: 'number'
            pattern: 'inherited'
          }
        }
      ]
      settings {
        show_row_number: true
        row_limit: 5000
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  block v_107n: VizBlock {
    label: 'Sum'
    viz: DataTable {
      dataset: demo_ecommerce_version_2
      calculation metric_86b8650 {
        label: 'Sum of Orders Discount'
        formula: @aql sum(ecommerce_orders.discount);;
        calc_type: 'measure'
        data_type: 'number'
      }
      fields: [
        VizFieldFull {
          ref: r(ecommerce_countries.continent_name)
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: 'metric_86b8650'
          format {
            type: 'number'
            pattern: '#,###'
          }
        }
      ]
      settings {
        show_row_number: true
        row_limit: 5000
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  block v_iy04: VizBlock {
    label: 'Avg'
    viz: DataTable {
      dataset: demo_ecommerce_version_2
      calculation metric_49cb05a {
        label: 'Average of Products Price'
        formula: @aql avg(ecommerce_products.price);;
        calc_type: 'measure'
        data_type: 'number'
      }
      fields: [
        VizFieldFull {
          ref: r(ecommerce_countries.continent_name)
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: 'metric_49cb05a'
          format {
            type: 'number'
            pattern: '#,###'
          }
        }
      ]
      settings {
        show_row_number: true
        row_limit: 5000
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  block v_rd7q: VizBlock {
    label: 'Max'
    viz: DataTable {
      dataset: demo_ecommerce_version_2
      calculation metric_8fad44c {
        label: 'Max of Products Price'
        formula: @aql max(ecommerce_products.price);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_cfef6b5 {
        label: 'Max of Orders Delivery Attempts'
        formula: @aql max(ecommerce_orders.delivery_attempts);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_8d2d13d {
        label: 'Max of Orders Cohort Size'
        formula: @aql max(ecommerce_orders.cohort_size);;
        calc_type: 'measure'
        data_type: 'number'
      }
      fields: [
        VizFieldFull {
          ref: r(ecommerce_users.age_group)
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: 'metric_8d2d13d'
          format {
            type: 'number'
            pattern: 'inherited'
          }
        }
      ]
      settings {
        show_row_number: true
        row_limit: 5000
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  block v_4hvg: VizBlock {
    label: 'P-stdv'
    viz: DataTable {
      dataset: demo_ecommerce_version_2
      calculation metric_8fad44c {
        label: 'Max of Products Price'
        formula: @aql max(ecommerce_products.price);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_cfef6b5 {
        label: 'Max of Orders Delivery Attempts'
        formula: @aql max(ecommerce_orders.delivery_attempts);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_8d2d13d {
        label: 'Max of Orders Cohort Size'
        formula: @aql max(ecommerce_orders.cohort_size);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_a9ea6cc {
        label: 'Population standard deviation of Products Price'
        formula: @aql stdev(ecommerce_products.price);;
        calc_type: 'measure'
        data_type: 'number'
      }
      fields: [
        VizFieldFull {
          ref: r(map_categories.category)
          format {
            type: 'text'
          }
        },
        VizFieldFull {
          ref: 'metric_a9ea6cc'
          format {
            type: 'number'
            pattern: '#,###'
          }
        }
      ]
      settings {
        show_row_number: true
        row_limit: 5000
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  block v_273a: VizBlock {
    label: 'Running total'
    viz: DataTable {
      dataset: demo_ecommerce_version_2
      calculation metric_8fad44c {
        label: 'Max of Products Price'
        formula: @aql max(ecommerce_products.price);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_cfef6b5 {
        label: 'Max of Orders Delivery Attempts'
        formula: @aql max(ecommerce_orders.delivery_attempts);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_8d2d13d {
        label: 'Max of Orders Cohort Size'
        formula: @aql max(ecommerce_orders.cohort_size);;
        calc_type: 'measure'
        data_type: 'number'
      }
      calculation metric_633232e {
        label: 'Running total of Total Orders'
        formula: @aql total_orders | running_total();;
        calc_type: 'measure'
        data_type: 'number'
      }
      fields: [
        VizFieldFull {
          ref: r(ecommerce_orders.created_at)
          transformation: 'datetrunc year'
          format {
            type: 'date'
            pattern: 'yyyy'
          }
          uname: 'datetrunc_year_created_at_1'
        },
        VizFieldFull {
          ref: 'metric_633232e'
          format {
            type: 'number'
            pattern: '#,###'
          }
        }
      ]
      settings {
        show_row_number: true
        sorts: [
          SortSetting {
            key: 'datetrunc_year_created_at_1'
            direction: 'asc'
          }
        ]
        row_limit: 5000
        aggregate_awareness {
          enabled: true
          debug_comments: true
        }
      }
    }
  }
  view: CanvasLayout {
    label: 'View 1'
    width: 1300
    grid_size: 20
    auto_expand_vertically: true
    block title {
      position: pos(20, 20, 1260, 60)
    }
    block v_agne {
      position: pos(20, 80, 380, 220)
      layer: 2
    }
    block v_107n {
      position: pos(420, 80, 340, 220)
      layer: 3
    }
    block v_iy04 {
      position: pos(780, 80, 340, 220)
      layer: 4
    }
    block v_rd7q {
      position: pos(20, 320, 620, 420)
      layer: 5
    }
    block v_4hvg {
      position: pos(660, 320, 620, 420)
      layer: 6
    }
    block v_273a {
      position: pos(20, 760, 620, 420)
      layer: 7
    }
    mobile {
      mode: 'auto'
    }
  }
  theme: H.themes.vanilla
}